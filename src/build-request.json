{
  "kind": "build_request",
  "title": "Fix Pre-Meditation “More details” to deep-link to matching Knowledge category",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Update the Pre-Meditation page “More details” button (the selected element) so it navigates to the Knowledge page with the category that corresponds to the current pre-meditation guide/meditation type (e.g., metta -> Metta category, ifs -> IFS category) instead of always landing on Mindfulness.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-6"
        ],
        "quotes": [
          "I noticed when I click on more details( I picked this element), it redirects me to the knowledge page, mindfulness category, always. It should correspond and reflec current pre-meditation guide. Meta > Meta Knowledge page category, IFS > IFS knowledge page category etc. Can you fix that?",
          "/html[1]/body[1]/div[1]/div[1]/main[1]/div[1]/div[2]/div[1]/button[1]"
        ]
      },
      "acceptanceCriteria": [
        "When the current pre-meditation type is `metta`, clicking “More details” navigates to `/knowledge` with the Metta category selected.",
        "When the current pre-meditation type is `ifs`, clicking “More details” navigates to `/knowledge` with the IFS category selected.",
        "When the current pre-meditation type is `visualization`, clicking “More details” navigates to `/knowledge` with the Visualization category selected.",
        "When the current pre-meditation type is `mindfulness`, clicking “More details” navigates to `/knowledge` with the Mindfulness category selected.",
        "The change is applied only to the selected “More details” button element in `frontend/src/pages/PreMeditationPage.tsx` (currently the button that calls `navigate({ to: '/knowledge', search: { scrollToContent: true } })`)."
      ]
    },
    {
      "id": "REQ-2",
      "text": "Update the Knowledge page to accept a category identifier via route search params and initialize the selected category from it (if present and valid), while preserving the existing deep-link scroll behavior (`scrollToContent`).",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-6"
        ],
        "quotes": [
          "It should correspond and reflec current pre-meditation guide. Meta > Meta Knowledge page category, IFS > IFS knowledge page category etc."
        ]
      },
      "acceptanceCriteria": [
        "`/knowledge` supports an optional search parameter for the category (e.g., `category=metta`, `category=ifs`, etc.).",
        "If the category search param matches a `TECHNIQUE_CONTENT` id, the Knowledge page opens with that category selected.",
        "If the category search param is missing or invalid, the Knowledge page falls back to the current default behavior (first category in `TECHNIQUE_CONTENT`).",
        "If `scrollToContent` is provided, the page still scrolls to the content section anchor after rendering, and clearing search params after scrolling does not reset the selected category unintentionally."
      ]
    }
  ],
  "constraints": [
    "Do not modify files in `frontend/src/components/ui` or other paths listed under `frontend.immutablePaths` in SYSTEM_CONTEXT."
  ],
  "nonGoals": [
    "Adding new knowledge categories or changing `TECHNIQUE_CONTENT` content.",
    "Changing the Knowledge page layout or carousel behavior beyond selecting the correct initial category.",
    "Backend changes or data migrations."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}